(this.webpackJsonpthe_phonebook=this.webpackJsonpthe_phonebook||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),s=n.n(o),c=n(16),u=n(3),i=n(2),l=n.n(i),f=n(4),m=n(5),p=n.n(m),d="/api/persons",b={getAllPersons:function(){var e=Object(f.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(d);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createPerson:function(){var e=Object(f.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post(d,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deletePerson:function(){var e=Object(f.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.delete("".concat(d,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updatePerson:function(){var e=Object(f.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.put("".concat(d,"/").concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(e){var t=e.newName,n=e.setNewName,a=e.newNumber,o=e.setNewNumber;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Add new"),r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:a,onChange:function(e){return o(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},h=function(e){var t=e.setSearchQuery,n=e.persons;return r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{onChange:function(e){var a=e.target.value;t(n.filter((function(e){return e.name.toLocaleLowerCase().startsWith("".concat(a.toLowerCase()))})))}}))},w=function(e){var t=e.setPersons,n=e.persons,a=e.person,o=e.setNotificationMessage,s=e.setNotificationClass;return r.a.createElement("input",{onClick:function(){var e="Delete ".concat(a.name,"?");window.confirm(e)&&(b.deletePerson(a.id).catch((function(){o("Information of '".concat(a.name,"' has already been removed from server")),s("error"),setTimeout((function(){o(null),s(null)}),5e3),t(n.filter((function(e){return e.id!==a.id})))})),t(n.filter((function(e){return e.id!==a.id}))))},type:"button",value:"delete"})},N=function(e){var t=e.setPersons,n=e.persons,a=e.person,o=e.setNotificationMessage,s=e.setNotificationClass;return r.a.createElement("li",{key:a.id},a.name," ",a.number," ",r.a.createElement(w,{setPersons:t,persons:n,person:a,setNotificationMessage:o,setNotificationClass:s}))},E=function(e){var t=e.setPersons,n=e.persons,a=e.searchQuery,o=e.setNotificationMessage,s=e.setNotificationClass;return r.a.createElement("ul",null,a.length?a.map((function(e){return r.a.createElement(N,{key:e.id,person:e,persons:n,setPersons:t,setNotificationMessage:o,setNotificationClass:s})})):n.map((function(e){return r.a.createElement(N,{key:e.id,person:e,persons:n,setPersons:t,setNotificationMessage:o,setNotificationClass:s})})))},g=function(e){var t=e.message,n=e.className;return null===t?null:r.a.createElement("div",{className:n},t)},j=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],s=Object(a.useState)(""),i=Object(u.a)(s,2),l=i[0],f=i[1],m=Object(a.useState)(""),p=Object(u.a)(m,2),d=p[0],w=p[1],N=Object(a.useState)([]),j=Object(u.a)(N,2),O=j[0],y=j[1],P=Object(a.useState)(null),k=Object(u.a)(P,2),C=k[0],x=k[1],S=Object(a.useState)(null),M=Object(u.a)(S,2),A=M[0],Q=M[1];Object(a.useEffect)((function(){b.getAllPersons().then((function(e){return o(e)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(g,{message:C,className:A}),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={name:l,number:d};console.log(t);var a=n.find((function(e){return e.name===l}));if(a){var r=window.confirm("".concat(l," is already added to phonebook, replace the old number with a new one?"));return window.confirm(r)?void b.updatePerson(Object(c.a)({},a,{number:d})).then((function(e){o(n.map((function(t){return t.id!==e.id?t:e}))),x("Added ".concat(e.name)),Q("notification"),setTimeout((function(){x(null),Q(null)}),5e3)})).catch((function(){x("Information of '".concat(a.name,"' has already been removed from server")),Q("error"),setTimeout((function(){x(null),Q(null)}),5e3),o(n.filter((function(e){return e.id!==a.id})))})):void 0}b.createPerson(t).then((function(e){o(n.concat(e)),x("Added ".concat(e.name)),Q("notification"),setTimeout((function(){x(null),Q(null)}),5e3)}))}},r.a.createElement(h,{setSearchQuery:y,persons:n}),r.a.createElement(v,{newName:l,newNumber:d,setNewName:f,setNewNumber:w})),r.a.createElement("h2",null,"Numbers"),r.a.createElement(E,{setPersons:o,persons:n,searchQuery:O,setNotificationMessage:x,setNotificationClass:Q}))};n(40);s.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.232dc85f.chunk.js.map